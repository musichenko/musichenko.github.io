<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<!DOCTYPE html
  PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:exsl="http://exslt.org/common" xmlns:ng="http://docbook.org/docbook-ng" xmlns:fb="http://ogp.me/ns/fb#"><head>
<link href="https://netdna.bootstrapcdn.com/font-awesome/3.2.1/css/font-awesome.css" rel="stylesheet"/>
<title>Chapter 11. Maintenance, Failures, and Debugging - OpenStack Operations Guide</title><meta name="generator" content="DocBook XSL-NS Stylesheets V1.76.1"/><meta name="mavenGroupId" content="org.openstack.docs"/><meta name="mavenArtifactId" content="openstack-ops-manual"/><meta name="mavenVersionId" content="1.0.0"/><link rel="home" href="index.html" title="OpenStack Operations Guide"/><link rel="up" href="operations.html" title="Operations"/><link rel="prev" href="user-facing-outro.html" title="Good Luck!"/><link rel="next" href="network_troubleshooting.html" title="Chapter 12. Network Troubleshooting"/><meta http-equiv="Content-Type" content="text/html; charset=utf-8"/><meta name="git-sha" content="c736dbf695b9b6d705875e6f24f6f8ec044c4e31"/><meta name="buildTime" content="2015-10-20T23:42:21+02:00"/><script type="text/javascript">
            //The id for tree cookie
            var treeCookieId = "treeview-openstack-operations-guide";
            var language = "en";
            var w = new Object();
            //Localization
            txt_filesfound = 'Results';
            txt_enter_at_least_1_char = "You must enter at least one character.";
            txt_browser_not_supported = "Please enable JavaScript.";
            txt_please_wait = "Please wait. Search in progress...";
            txt_results_for = "Results for: ";
        </script><style type="text/css">
            input {
            margin-bottom: 5px;
            margin-top: 2px;
            }

            .folder {
            display: block;
            height: 22px;
            padding-left: 20px;
            background: transparent url(../common/jquery/treeview/images/folder.gif) 0 0px no-repeat;
            }
            
        </style><link rel="shortcut icon" href="../favicon.ico" type="image/x-icon"/><link rel="stylesheet" type="text/css" href="../common/css/positioning.css"/><link rel="stylesheet" type="text/css" href="../common/css/custom.css"/><link rel="canonical" href="http://docs.openstack.org/openstack-ops/content//maintenance.html"/><!--[if IE]>
	<link rel="stylesheet" type="text/css" href="../common/css/ie.css"/>
	<![endif]--><link rel="stylesheet" type="text/css" href="../common/jquery/theme-redmond/jquery-ui-1.8.2.custom.css"/><link rel="stylesheet" type="text/css" href="../common/jquery/treeview/jquery.treeview.css"/><script type="text/javascript" src="http://code.jquery.com/jquery-1.11.0.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery-ui-1.8.2.custom.min.js"><!----></script><script type="text/javascript" src="../common/jquery/jquery.cookie.js"><!----></script><script type="text/javascript" src="../common/jquery/treeview/jquery.treeview.min.js"><!----></script><link rel="stylesheet" type="text/css" href="http://cdn.jsdelivr.net/qtip2/2.2.0/jquery.qtip.min.css"/><script type="text/javascript" src="http://cdnjs.cloudflare.com/ajax/libs/qtip2/2.2.0/jquery.qtip.min.js"><!--jQuery plugin for glossary popups. --></script><script type="text/javascript" src="search/htmlFileList.js"><!----></script><script type="text/javascript" src="search/htmlFileInfoList.js"><!----></script><script type="text/javascript" src="search/nwSearchFnt.js"><!----></script><script type="text/javascript" src="search/stemmers/en_stemmer.js"><!--//make this scalable to other languages as well.--></script><script type="text/javascript" src="search/index-1.js"><!----></script><script type="text/javascript" src="search/index-2.js"><!----></script><script type="text/javascript" src="search/index-3.js"><!----></script><script type="text/javascript">
	    var _gaq = _gaq || [];
	    _gaq.push(['_setAccount', 'UA-17511903-1']);
	    
	    _gaq.push(['_setDomainName', '.openstack.org']);	        
	        </script><script type="text/javascript" src="../common/ga.js"><!----></script></head><body><div id="header"><a onclick="_gaq.push(['_trackEvent', 'Header', 'logo', 'click', 1]);" target="_blank" href="http://www.openstack.org"><img src="../common/images/openstack-logo.png" alt="OpenStack Documentation" width="157" height="47"/></a><h1>Chapter 11. Maintenance, Failures, and Debugging</h1><div id="navheader" align="right"><!----><table class="navLinks"><tr><td><a id="showHideButton" onclick="showHideToc(); _gaq.push(['_trackEvent', 'Header', 'show/hide', 'click', 1]);" class="pointLeft" title="Hide TOC tree">Sidebar
                            </a></td><td><a accesskey="p" class="navLinkPrevious" onclick="_gaq.push(['_trackEvent', 'Header', 'prevLink', 'click', 1]);" tabindex="5" href="user-facing-outro.html">Prev</a>
				      |
                                        <a accesskey="u" class="navLinkUp" onclick="_gaq.push(['_trackEvent', 'Header', 'upLink', 'click', 1]);" tabindex="5" href="operations.html">Up</a>
				  |
                                    <a accesskey="n" class="navLinkNext" onclick="_gaq.push(['_trackEvent', 'Header', 'nextLink', 'click', 1]);" tabindex="5" href="network_troubleshooting.html">Next</a></td></tr></table></div></div><div id="toolbar" class="ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all"><div id="toolbar-left"><p class="breadcrumbs"><a href="http://docs.openstack.org/">OpenStack Manuals</a><a href="index.html">OpenStack Operations Guide</a></p><a onclick="_gaq.push(['_trackEvent', 'Header', 'pdfDownload', 'click', 1]);" alt="Download a pdf of this document" class="pdficon" href="../openstack-ops-manual.pdf"><img src="../common/images/pdf.png"/></a><div id="gplusone"><a id="AskOOLink1" href="http://ask.openstack.org" target="_blank" title="Questions? Discuss on ask.openstack.org"><i class="icon-question"><!----></i></a>  
        <a id="logABugLink1" href="" target="_blank" title="Found an error? Report a bug against this page"><i class="icon-bug"><!----></i></a></div></div></div><div id="content"><div class="chapter"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="maintenance"> </a>Chapter 11. Maintenance, Failures, and Debugging</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#cloud_controller_storage">Cloud Controller and Storage Proxy Failures and Maintenance</a></span></dt><dt><span class="section"><a href="maintenance.html#compute_node_failures">Compute Node Failures and Maintenance</a></span></dt><dt><span class="section"><a href="maintenance.html#storage_node_failures">Storage Node Failures and Maintenance</a></span></dt><dt><span class="section"><a href="maintenance.html#complete_failure">Handling a Complete Failure</a></span></dt><dt><span class="section"><a href="maintenance.html#config_mgmt">Configuration Management</a></span></dt><dt><span class="section"><a href="maintenance.html#hardware">Working with Hardware</a></span></dt><dt><span class="section"><a href="maintenance.html#databases">Databases</a></span></dt><dt><span class="section"><a href="maintenance.html#hdmy">HDWMY</a></span></dt><dt><span class="section"><a href="maintenance.html#broken_component">Determining Which Component Is Broken</a></span></dt><dt><span class="section"><a href="maintenance.html#uninstalling">Uninstalling</a></span></dt></dl></div><p>Downtime, whether planned or unscheduled, is a certainty when running
  a cloud. This chapter aims to provide useful information for dealing
  proactively, or reactively, with these occurrences.<a id="maindebug" class="indexterm"/></p><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="cloud_controller_storage"> </a>Cloud Controller and Storage Proxy Failures and Maintenance</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#planned_maintenance">Planned Maintenance</a></span></dt><dt><span class="section"><a href="maintenance.html#reboot_cloud_controller">Rebooting a Cloud Controller or Storage Proxy</a></span></dt><dt><span class="section"><a href="maintenance.html#after_a_cc_reboot">After a Cloud Controller or Storage Proxy Reboots</a></span></dt><dt><span class="section"><a href="maintenance.html#cc_failure">Total Cloud Controller Failure</a></span></dt></dl></div><p>The cloud controller and storage proxy are very similar to each
    other when it comes to expected and unexpected downtime. One of each
    server type typically runs in the cloud, which makes them very noticeable
    when they are not running.</p><p>For the cloud controller, the good news is if your cloud is using
    the FlatDHCP multi-host HA network mode, existing instances and volumes
    continue to operate while the cloud controller is offline. For the storage
    proxy, however, no storage traffic is possible until it is back up and
    running.</p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="planned_maintenance"> </a>Planned Maintenance</h3></div></div></div><p>One way to plan for cloud controller or storage proxy maintenance
      is to simply do it off-hours, such as at 1 a.m. or 2 a.m. This strategy
      affects fewer users. If your cloud controller or storage proxy is too
      important to have unavailable at any point in time, you must look into
      high-availability options.<a id="d9e4961" class="indexterm"/><a id="d9e4964" class="indexterm"/></p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="reboot_cloud_controller"> </a>Rebooting a Cloud Controller or Storage Proxy</h3></div></div></div><p>All in all, just issue the "reboot" command. The operating system
      cleanly shuts down services and then automatically reboots. If you want
      to be very thorough, run your backup jobs just before you
      reboot.<a id="d9e4970" class="indexterm"/><a id="d9e4973" class="indexterm"/><a id="d9e4976" class="indexterm"/><a id="d9e4979" class="indexterm"/></p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="after_a_cc_reboot"> </a>After a Cloud Controller or Storage Proxy Reboots</h3></div></div></div><p>After a cloud controller reboots, ensure that all required
      services were successfully started. The following commands use
      <code class="code">ps</code> and <code class="code">grep</code> to determine if nova, glance, and
      keystone are currently running:</p><pre class="programlisting"># ps aux | grep nova-
# ps aux | grep glance-
# ps aux | grep keystone
# ps aux | grep cinder</pre><p>Also check that all services are functioning. The following set of
      commands sources the <code class="code">openrc</code> file, then runs some basic
      glance, nova, and openstack commands. If the commands work as expected,
      you can be confident that those services are in working
      condition:</p><pre class="programlisting"># source openrc
# glance index
# nova list
# openstack project list</pre><p>For the storage proxy, ensure that the Object Storage service has
      resumed:</p><pre class="programlisting"># ps aux | grep swift</pre><p>Also check that it is functioning:</p><pre class="programlisting"># swift stat</pre></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="cc_failure"> </a>Total Cloud Controller Failure</h3></div></div></div><p>The cloud controller could completely fail if, for example, its
      motherboard goes bad. Users will immediately notice the loss of a cloud
      controller since it provides core functionality to your cloud
      environment. If your infrastructure monitoring does not alert you that
      your cloud controller has failed, your users definitely will.
      Unfortunately, this is a rough situation. The cloud controller is an
      integral part of your cloud. If you have only one controller, you will
      have many missing services if it goes down.<a id="d9e4998" class="indexterm"/><a id="d9e5001" class="indexterm"/></p><p>To avoid this situation, create a highly available cloud
      controller cluster. This is outside the scope of this document, but you
      can read more in the draft <a class="link" href="http://docs.openstack.org/high-availability-guide/content/ch-intro.html" target="_top">OpenStack High Availability
      Guide</a>.</p><p>The next best approach is to use a configuration-management tool,
      such as Puppet, to automatically build a cloud controller. This should
      not take more than 15 minutes if you have a spare server available.
      After the controller rebuilds, restore any backups taken (see <a class="xref" href="backup_and_recovery.html" title="Chapter 14. Backup and Recovery">Chapter 14, <em>Backup and Recovery</em></a>).</p><p>Also, in practice, the <code class="literal">nova-compute</code> services on
      the compute nodes do not always reconnect cleanly to rabbitmq hosted on
      the controller when it comes back up after a long reboot; a restart on
      the nova services on the compute nodes is required.</p></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="compute_node_failures"> </a>Compute Node Failures and Maintenance</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#planned_maintenance_compute_node">Planned Maintenance</a></span></dt><dt><span class="section"><a href="maintenance.html#after_compute_node_reboot">After a Compute Node Reboots</a></span></dt><dt><span class="section"><a href="maintenance.html#maintenance_instances">Instances</a></span></dt><dt><span class="section"><a href="maintenance.html#inspect_and_recover_failed_instances">Inspecting and Recovering Data from Failed Instances</a></span></dt><dt><span class="section"><a href="maintenance.html#volumes">Volumes</a></span></dt><dt><span class="section"><a href="maintenance.html#totle_compute_node_failure">Total Compute Node Failure</a></span></dt><dt><span class="section"><a href="maintenance.html#var_lib_nova_instances">/var/lib/nova/instances</a></span></dt></dl></div><p>Sometimes a compute node either crashes unexpectedly or requires a
    reboot for maintenance reasons.</p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="planned_maintenance_compute_node"> </a>Planned Maintenance</h3></div></div></div><p>If you need to reboot a compute node due to planned maintenance
      (such as a software or hardware upgrade), first ensure that all hosted
      instances have been moved off the node. If your cloud is utilizing
      shared storage, use the <code class="code">nova live-migration</code> command. First,
      get a list of instances that need to be moved:<a id="d9e5017" class="indexterm"/><a id="d9e5020" class="indexterm"/></p><pre class="programlisting"># nova list --host c01.example.com --all-tenants</pre><p>Next, migrate them one by one:</p><pre class="programlisting"># nova live-migration &lt;uuid&gt; c02.example.com</pre><p>If you are not using shared storage, you can use the
      <code class="code">--block-migrate</code> option:</p><pre class="programlisting"># nova live-migration --block-migrate &lt;uuid&gt; c02.example.com</pre><p>After you have migrated all instances, ensure that the
      <code class="code">nova-compute</code> service has <span class="keep-together">stopped</span>:</p><pre class="programlisting"># stop nova-compute</pre><p>If you use a configuration-management system, such as Puppet, that
      ensures the <code class="code">nova-compute</code> service is always running, you can
      temporarily move the <code class="literal">init</code> files:</p><pre class="programlisting"># mkdir /root/tmp
# mv /etc/init/nova-compute.conf /root/tmp
# mv /etc/init.d/nova-compute /root/tmp</pre><p>Next, shut down your compute node, perform your maintenance, and
      turn the node back on. You can reenable the <code class="code">nova-compute</code>
      service by undoing the previous commands:</p><pre class="programlisting"># mv /root/tmp/nova-compute.conf /etc/init
# mv /root/tmp/nova-compute /etc/init.d/</pre><p>Then start the <code class="code">nova-compute</code> service:</p><pre class="programlisting"># start nova-compute</pre><p>You can now optionally migrate the instances back to their
      original compute node.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="after_compute_node_reboot"> </a>After a Compute Node Reboots</h3></div></div></div><p>When you reboot a compute node, first verify that it booted
      successfully. This includes ensuring that the <code class="code">nova-compute</code>
      service is running:<a id="d9e5048" class="indexterm"/><a id="d9e5051" class="indexterm"/></p><pre class="programlisting"># ps aux | grep nova-compute
# status nova-compute</pre><p>Also ensure that it has successfully connected to the AMQP
      server:</p><pre class="programlisting"># grep AMQP /var/log/nova/nova-compute
2013-02-26 09:51:31 12427 INFO nova.openstack.common.rpc.common [-] Connected to AMQP server on 199.116.232.36:5672</pre><p>After the compute node is successfully running, you must deal with
      the instances that are hosted on that compute node because none of them
      are running. Depending on your SLA with your users or customers, you
      might have to start each instance and ensure that they start
      correctly.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="maintenance_instances"> </a>Instances</h3></div></div></div><p>You can create a list of instances that are hosted on the compute
      node by performing the following command:<a id="d9e5061" class="indexterm"/><a id="d9e5064" class="indexterm"/></p><pre class="programlisting"># nova list --host c01.example.com --all-tenants</pre><p>After you have the list, you can use the nova command to start
      each instance:</p><pre class="programlisting"># nova reboot &lt;uuid&gt;</pre><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../common/images/admon/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>Any time an instance shuts down unexpectedly, it might have
        problems on boot. For example, the instance might require an
        <code class="code">fsck</code> on the root partition. If this happens, the user can
        use the dashboard VNC console to fix this.</p></td></tr></table></div><p>If an instance does not boot, meaning <code class="code">virsh list</code>
      never shows the instance as even attempting to boot, do the following on
      the compute node:</p><pre class="programlisting"># tail -f /var/log/nova/nova-compute.log</pre><p>Try executing the <code class="code">nova reboot</code> command again. You
      should see an error message about why the instance was not able to
      boot</p><p>In most cases, the error is the result of something in libvirt's
      XML file (<code class="code">/etc/libvirt/qemu/instance-xxxxxxxx.xml</code>) that no
      longer exists. You can enforce re-creation of the XML file as well as
      rebooting the instance by running the following command:</p><pre class="programlisting"># nova reboot --hard &lt;uuid&gt;</pre></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="inspect_and_recover_failed_instances"> </a>Inspecting and Recovering Data from Failed Instances</h3></div></div></div><p>In some scenarios, instances are running but are inaccessible
      through SSH and do not respond to any command. The VNC console could be
      displaying a boot failure or kernel panic error messages. This could be
      an indication of file system corruption on the VM itself. If you need to
      recover files or inspect the content of the instance, qemu-nbd can be
      used to mount the disk.<a id="d9e5084" class="indexterm"/></p><div class="warning" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Warning"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Warning]" src="../common/images/admon/warning.png"/></td><th align="left">Warning</th></tr><tr><td align="left" valign="top"><p>If you access or view the user's content and data, get approval
        first!<a id="d9e5089" class="indexterm"/></p></td></tr></table></div><p>To access the instance's disk
      (<code class="literal">/var/lib/nova/instances/instance-<em class="replaceable"><code>xxxxxx</code></em>/disk</code>),
      use the following steps:</p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Suspend the instance using the <code class="literal">virsh</code>
          command.</p></li><li class="listitem"><p>Connect the qemu-nbd device to the disk.</p></li><li class="listitem"><p>Mount the qemu-nbd device.</p></li><li class="listitem"><p>Unmount the device after inspecting.</p></li><li class="listitem"><p>Disconnect the qemu-nbd device.</p></li><li class="listitem"><p>Resume the instance.</p></li></ol></div><p>If you do not follow steps 4 through 6, OpenStack Compute cannot
      manage the instance any longer. It fails to respond to any command
      issued by OpenStack Compute, and it is marked as shut down.</p><p>Once you mount the disk file, you should be able to access it and
      treat it as a collection of normal directories with files and a
      directory structure. However, we do not recommend that you edit or touch
      any files because this could change the access control lists (ACLs) that
      are used to determine which accounts can perform what operations on
      files and directories. Changing ACLs can make the instance unbootable if
      it is not already.<a id="d9e5111" class="indexterm"/></p><div class="orderedlist"><ol class="orderedlist" type="1"><li class="listitem"><p>Suspend the instance using the <code class="literal">virsh</code>
          command, taking note of the internal ID:</p><pre class="programlisting"># virsh list
Id Name                 State
----------------------------------
1 instance-00000981    running
2 instance-000009f5    running
30 instance-0000274a    running

# virsh suspend 30
Domain 30 suspended</pre></li><li class="listitem"><p>Connect the qemu-nbd device to the disk:</p><pre class="programlisting"># cd /var/lib/nova/instances/instance-0000274a
# ls -lh
total 33M
-rw-rw---- 1 libvirt-qemu kvm  6.3K Oct 15 11:31 console.log
-rw-r--r-- 1 libvirt-qemu kvm   33M Oct 15 22:06 disk
-rw-r--r-- 1 libvirt-qemu kvm  384K Oct 15 22:06 disk.local
-rw-rw-r-- 1 nova         nova 1.7K Oct 15 11:30 libvirt.xml
# qemu-nbd -c /dev/nbd0 `pwd`/disk</pre></li><li class="listitem"><p>Mount the qemu-nbd device.</p><p>The qemu-nbd device tries to export the instance disk's
          different partitions as separate devices. For example, if vda is the
          disk and vda1 is the root partition, qemu-nbd exports the device as
          <code class="literal">/dev/nbd0</code> and <code class="literal">/dev/nbd0p1</code>,
          respectively:</p><pre class="programlisting"># mount /dev/nbd0p1 /mnt/</pre><p>You can now access the contents of <code class="code">/mnt</code>, which
          correspond to the first partition of the instance's disk.</p><p>To examine the secondary or ephemeral disk, use an alternate
          mount point if you want both primary and secondary drives mounted at
          the same time:</p><pre class="programlisting"># umount /mnt
# qemu-nbd -c /dev/nbd1 `pwd`/disk.local
# mount /dev/nbd1 /mnt/</pre><pre class="programlisting"># ls -lh /mnt/
total 76K
lrwxrwxrwx.  1 root root    7 Oct 15 00:44 bin -&gt; usr/bin
dr-xr-xr-x.  4 root root 4.0K Oct 15 01:07 boot
drwxr-xr-x.  2 root root 4.0K Oct 15 00:42 dev
drwxr-xr-x. 70 root root 4.0K Oct 15 11:31 etc
drwxr-xr-x.  3 root root 4.0K Oct 15 01:07 home
lrwxrwxrwx.  1 root root    7 Oct 15 00:44 lib -&gt; usr/lib
lrwxrwxrwx.  1 root root    9 Oct 15 00:44 lib64 -&gt; usr/lib64
drwx------.  2 root root  16K Oct 15 00:42 lost+found
drwxr-xr-x.  2 root root 4.0K Feb  3  2012 media
drwxr-xr-x.  2 root root 4.0K Feb  3  2012 mnt
drwxr-xr-x.  2 root root 4.0K Feb  3  2012 opt
drwxr-xr-x.  2 root root 4.0K Oct 15 00:42 proc
dr-xr-x---.  3 root root 4.0K Oct 15 21:56 root
drwxr-xr-x. 14 root root 4.0K Oct 15 01:07 run
lrwxrwxrwx.  1 root root    8 Oct 15 00:44 sbin -&gt; usr/sbin
drwxr-xr-x.  2 root root 4.0K Feb  3  2012 srv
drwxr-xr-x.  2 root root 4.0K Oct 15 00:42 sys
drwxrwxrwt.  9 root root 4.0K Oct 15 16:29 tmp
drwxr-xr-x. 13 root root 4.0K Oct 15 00:44 usr
drwxr-xr-x. 17 root root 4.0K Oct 15 00:44 var</pre></li><li class="listitem"><p>Once you have completed the inspection, unmount the mount
          point and release the qemu-nbd device:</p><pre class="programlisting"># umount /mnt
# qemu-nbd -d /dev/nbd0
/dev/nbd0 disconnected</pre></li><li class="listitem"><p>Resume the instance using <code class="literal">virsh</code>:</p><pre class="programlisting"># virsh list
Id Name                 State
----------------------------------
1 instance-00000981    running
2 instance-000009f5    running
30 instance-0000274a    paused

# virsh resume 30
Domain 30 resumed</pre></li></ol></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="volumes"> </a>Volumes</h3></div></div></div><p>If the affected instances also had attached volumes, first
      generate a list of instance and volume UUIDs:<a id="d9e5142" class="indexterm"/><a id="d9e5145" class="indexterm"/></p><pre class="programlisting">mysql&gt; select nova.instances.uuid as instance_uuid,
cinder.volumes.id as volume_uuid, cinder.volumes.status,
cinder.volumes.attach_status, cinder.volumes.mountpoint,
cinder.volumes.display_name from cinder.volumes
inner join nova.instances on cinder.volumes.instance_uuid=nova.instances.uuid
 where nova.instances.host = 'c01.example.com';</pre><p>You should see a result similar to the following:</p><pre class="programlisting">
+--------------+------------+-------+--------------+-----------+--------------+
|instance_uuid |volume_uuid |status |attach_status |mountpoint | display_name |
+--------------+------------+-------+--------------+-----------+--------------+
|9b969a05      |1f0fbf36    |in-use |attached      |/dev/vdc   | test         |
+--------------+------------+-------+--------------+-----------+--------------+
1 row in set (0.00 sec)</pre><p>Next, manually detach and reattach the volumes, where X is the
      proper mount point:</p><pre class="programlisting"># nova volume-detach &lt;instance_uuid&gt; &lt;volume_uuid&gt;
# nova volume-attach &lt;instance_uuid&gt; &lt;volume_uuid&gt; /dev/vdX</pre><p>Be sure that the instance has successfully booted and is at a
      login screen before doing the above.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="totle_compute_node_failure"> </a>Total Compute Node Failure</h3></div></div></div><p>Compute nodes can fail the same way a cloud controller can fail. A
      motherboard failure or some other type of hardware failure can cause an
      entire compute node to go offline. When this happens, all instances
      running on that compute node will not be available. Just like with a
      cloud controller failure, if your infrastructure monitoring does not
      detect a failed compute node, your users will notify you because of
      their lost instances.<a id="d9e5157" class="indexterm"/><a id="d9e5160" class="indexterm"/></p><p>If a compute node fails and won't be fixed for a few hours (or at
      all), you can relaunch all instances that are hosted on the failed node
      if you use shared storage for
      <code class="code">/var/lib/nova/instances</code>.</p><p>To do this, generate a list of instance UUIDs that are hosted on
      the failed node by running the following query on the nova
      database:</p><pre class="programlisting">mysql&gt; select uuid from instances where host = \
       'c01.example.com' and deleted = 0;</pre><p>Next, update the nova database to indicate that all instances that
      used to be hosted on c01.example.com are now hosted on
      c02.example.com:</p><pre class="programlisting">mysql&gt; update instances set host = 'c02.example.com' where host = \
       'c01.example.com' and deleted = 0;</pre><p>After that, use the <code class="literal">nova</code> command to reboot all
      instances that were on c01.example.com while regenerating their XML
      files at the same time:</p><pre class="programlisting"># nova reboot --hard &lt;uuid&gt;</pre><p>Finally, reattach volumes using the same method described in the
      section <a class="link" href="maintenance.html#volumes" title="Volumes">Volumes</a>.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="var_lib_nova_instances"> </a>/var/lib/nova/instances</h3></div></div></div><p>It's worth mentioning this directory in the context of failed
      compute nodes. This directory contains the libvirt KVM file-based disk
      images for the instances that are hosted on that compute node. If you
      are not running your cloud in a shared storage environment, this
      directory is unique across all compute nodes.<a id="d9e5177" class="indexterm"/><a id="d9e5179" class="indexterm"/></p><p><code class="code">/var/lib/nova/instances</code> contains two types of
      directories.</p><p>The first is the <code class="code">_base</code> directory. This contains all
      the cached base images from glance for each unique image that has been
      launched on that compute node. Files ending in <code class="code">_20</code> (or a
      different number) are the ephemeral base images.</p><p>The other directories are titled <code class="code">instance-xxxxxxxx</code>.
      These directories correspond to instances running on that compute node.
      The files inside are related to one of the files in the
      <code class="code">_base</code> directory. They're essentially differential-based
      files containing only the changes made from the original
      <code class="code">_base</code> directory.</p><p>All files and directories in <code class="code">/var/lib/nova/instances</code>
      are uniquely named. The files in _base are uniquely titled for the
      glance image that they are based on, and the directory names
      <code class="code">instance-xxxxxxxx</code> are uniquely titled for that particular
      instance. For example, if you copy all data from
      <code class="code">/var/lib/nova/instances</code> on one compute node to another, you
      do not overwrite any files or cause any damage to images that have the
      same unique name, because they are essentially the same file.</p><p>Although this method is not documented or supported, you can use
      it when your compute node is permanently offline but you have instances
      locally stored on it.</p></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="storage_node_failures"> </a>Storage Node Failures and Maintenance</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#reboot_storage_node">Rebooting a Storage Node</a></span></dt><dt><span class="section"><a href="maintenance.html#shut_down_storage_node">Shutting Down a Storage Node</a></span></dt><dt><span class="section"><a href="maintenance.html#replace_swift_disk">Replacing a Swift Disk</a></span></dt></dl></div><p>Because of the high redundancy of Object Storage, dealing with
    object storage node issues is a lot easier than dealing with compute node
    issues.</p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="reboot_storage_node"> </a>Rebooting a Storage Node</h3></div></div></div><p>If a storage node requires a reboot, simply reboot it. Requests
      for data hosted on that node are redirected to other copies while the
      server is rebooting.<a id="d9e5202" class="indexterm"/><a id="d9e5204" class="indexterm"/><a id="d9e5207" class="indexterm"/></p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="shut_down_storage_node"> </a>Shutting Down a Storage Node</h3></div></div></div><p>If you need to shut down a storage node for an extended period of
      time (one or more days), consider removing the node from the storage
      ring. For example:<a id="d9e5213" class="indexterm"/></p><pre class="programlisting"># swift-ring-builder account.builder remove &lt;ip address of storage node&gt;
# swift-ring-builder container.builder remove &lt;ip address of storage node&gt;
# swift-ring-builder object.builder remove &lt;ip address of storage node&gt;
# swift-ring-builder account.builder rebalance
# swift-ring-builder container.builder rebalance
# swift-ring-builder object.builder rebalance</pre><p>Next, redistribute the ring files to the other nodes:</p><pre class="programlisting"># for i in s01.example.com s02.example.com s03.example.com
&gt; do
&gt; scp *.ring.gz $i:/etc/swift
&gt; done</pre><p>These actions effectively take the storage node out of the storage
      cluster.</p><p>When the node is able to rejoin the cluster, just add it back to
      the ring. The exact syntax you use to add a node to your swift cluster
      with <code class="code">swift-ring-builder</code> heavily depends on the original
      options used when you originally created your cluster. Please refer back
      to those commands.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="replace_swift_disk"> </a>Replacing a Swift Disk</h3></div></div></div><p>If a hard drive fails in an Object Storage node, replacing it is
      relatively easy. This assumes that your Object Storage environment is
      configured correctly, where the data that is stored on the failed drive
      is also replicated to other drives in the Object Storage
      environment.<a id="d9e5225" class="indexterm"/><a id="d9e5227" class="indexterm"/></p><p>This example assumes that <code class="code">/dev/sdb</code> has failed.</p><p>First, unmount the disk:</p><pre class="programlisting"># umount /dev/sdb</pre><p>Next, physically remove the disk from the server and replace it
      with a working disk.</p><p>Ensure that the operating system has recognized the new
      disk:</p><pre class="programlisting"># dmesg | tail</pre><p>You should see a message about <code class="code">/dev/sdb</code>.</p><p>Because it is recommended to not use partitions on a swift disk,
      simply format the disk as a whole:</p><pre class="programlisting"># mkfs.xfs /dev/sdb</pre><p>Finally, mount the disk:</p><pre class="programlisting"># mount -a</pre><p>Swift should notice the new disk and that no data exists. It then
      begins replicating the data to the disk from the other existing
      replicas.</p></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="complete_failure"> </a>Handling a Complete Failure</h2></div></div></div><p>A common way of dealing with the recovery from a full system
    failure, such as a power outage of a data center, is to assign each
    service a priority, and restore in order. <a class="xref" href="maintenance.html#restor-prior-table" title="Table 11.1. Example service restoration priority list">Table 11.1, “Example service restoration priority list”</a> shows an example.<a id="d9e5248" class="indexterm"/><a id="d9e5250" class="indexterm"/></p><table rules="all" id="restor-prior-table"><caption>Table 11.1. Example service restoration priority list</caption><thead><tr>
          <th>Priority</th>

          <th>Services</th>
        </tr></thead><tbody><tr>
          <td><p>1</p></td>

          <td><p>Internal network connectivity</p></td>
        </tr><tr>
          <td><p>2</p></td>

          <td><p>Backing storage services</p></td>
        </tr><tr>
          <td><p>3</p></td>

          <td><p>Public network connectivity for user virtual
          machines</p></td>
        </tr><tr>
          <td><p>4</p></td>

          <td><p><code class="literal">nova-compute</code>,
          <code class="literal">nova-network</code>, cinder hosts</p></td>
        </tr><tr>
          <td><p>5</p></td>

          <td><p>User virtual machines</p></td>
        </tr><tr>
          <td><p>10</p></td>

          <td><p>Message queue and database services</p></td>
        </tr><tr>
          <td><p>15</p></td>

          <td><p>Keystone services</p></td>
        </tr><tr>
          <td><p>20</p></td>

          <td><p><code class="literal">cinder-scheduler</code></p></td>
        </tr><tr>
          <td><p>21</p></td>

          <td><p>Image Catalog and Delivery services</p></td>
        </tr><tr>
          <td><p>22</p></td>

          <td><p><code class="literal">nova-scheduler</code> services</p></td>
        </tr><tr>
          <td><p>98</p></td>

          <td><p><code class="literal">cinder-api</code></p></td>
        </tr><tr>
          <td><p>99</p></td>

          <td><p><code class="literal">nova-api</code> services</p></td>
        </tr><tr>
          <td><p>100</p></td>

          <td><p>Dashboard node</p></td>
        </tr></tbody></table><p>Use this example priority list to ensure that user-affected services
    are restored as soon as possible, but not before a stable environment is
    in place. Of course, despite being listed as a single-line item, each step
    requires significant work. For example, just after starting the database,
    you should check its integrity, or, after starting the nova services, you
    should verify that the hypervisor matches the database and fix any <span class="keep-together">mismatches</span>.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="config_mgmt"> </a>Configuration Management</h2></div></div></div><p>Maintaining an OpenStack cloud requires that you manage multiple
    physical servers, and this number might grow over time. Because managing
    nodes manually is error prone, we strongly recommend that you use a
    configuration-management tool. These tools automate the process of
    ensuring that all your nodes are configured properly and encourage you to
    maintain your configuration information (such as packages and
    configuration options) in a version-controlled repository.<a id="d9e5336" class="indexterm"/><a id="d9e5338" class="indexterm"/><a id="d9e5341" class="indexterm"/></p><div class="tip" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Tip"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Tip]" src="../common/images/admon/tip.png"/></td><th align="left">Tip</th></tr><tr><td align="left" valign="top"><p>Several configuration-management tools are available, and this
      guide does not recommend a specific one. The two most popular ones in
      the OpenStack community are <a class="link" href="https://puppetlabs.com/" target="_top">Puppet</a>, with available
      <a class="link" href="https://github.com/puppetlabs/puppetlabs-openstack" target="_top">OpenStack Puppet
      modules</a>; and <a class="link" href="http://www.getchef.com/chef/" target="_top">Chef</a>, with available <a class="link" href="https://github.com/opscode/openstack-chef-repo" target="_top">OpenStack Chef recipes</a>.
      Other newer configuration tools include <a class="link" href="https://juju.ubuntu.com/" target="_top">Juju</a>, <a class="link" href="http://www.ansible.com/home" target="_top">Ansible</a>, and <a class="link" href="http://www.saltstack.com/" target="_top">Salt</a>; and more mature
      configuration management tools include <a class="link" href="http://cfengine.com/" target="_top">CFEngine</a> and <a class="link" href="http://bcfg2.org/" target="_top">Bcfg2</a>.</p></td></tr></table></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="hardware"> </a>Working with Hardware</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#add_new_node">Adding a Compute Node</a></span></dt><dt><span class="section"><a href="maintenance.html#add_new_object_node">Adding an Object Storage Node</a></span></dt><dt><span class="section"><a href="maintenance.html#replace_components">Replacing Components</a></span></dt></dl></div><p>As for your initial deployment, you should ensure that all hardware
    is appropriately burned in before adding it to production. Run software
    that uses the hardware to its limits—maxing out RAM, CPU, disk, and
    network. Many options are available, and normally double as benchmark
    software, so you also get a good idea of the performance of your
    system.<a id="d9e5358" class="indexterm"/><a id="d9e5361" class="indexterm"/></p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="add_new_node"> </a>Adding a Compute Node</h3></div></div></div><p>If you find that you have reached or are reaching the capacity
      limit of your computing resources, you should plan to add additional
      compute nodes. Adding more nodes is quite easy. The process for adding
      compute nodes is the same as when the initial compute nodes were
      deployed to your cloud: use an automated deployment system to bootstrap
      the bare-metal server with the operating system and then have a
      configuration-management system install and configure OpenStack Compute.
      Once the Compute service has been installed and configured in the same
      way as the other compute nodes, it automatically attaches itself to the
      cloud. The cloud controller notices the new node(s) and begins
      scheduling instances to launch there.<a id="d9e5367" class="indexterm"/><a id="d9e5370" class="indexterm"/><a id="d9e5373" class="indexterm"/></p><p>If your OpenStack Block Storage nodes are separate from your
      compute nodes, the same procedure still applies because the same queuing
      and polling system is used in both services.</p><p>We recommend that you use the same hardware for new compute and
      block storage nodes. At the very least, ensure that the CPUs are similar
      in the compute nodes to not break live migration.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="add_new_object_node"> </a>Adding an Object Storage Node</h3></div></div></div><p>Adding a new object storage node is different from adding compute
      or block storage nodes. You still want to initially configure the server
      by using your automated deployment and configuration-management systems.
      After that is done, you need to add the local disks of the object
      storage node into the object storage ring. The exact command to do this
      is the same command that was used to add the initial disks to the ring.
      Simply rerun this command on the object storage proxy server for all
      disks on the new object storage node. Once this has been done, rebalance
      the ring and copy the resulting ring files to the other storage
      nodes.<a id="d9e5381" class="indexterm"/></p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../common/images/admon/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>If your new object storage node has a different number of disks
        than the original nodes have, the command to add the new node is
        different from the original commands. These parameters vary from
        environment to environment.</p></td></tr></table></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="replace_components"> </a>Replacing Components</h3></div></div></div><p>Failures of hardware are common in large-scale deployments such as
      an infrastructure cloud. Consider your processes and balance time saving
      against availability. For example, an Object Storage cluster can easily
      live with dead disks in it for some period of time if it has sufficient
      capacity. Or, if your compute installation is not full, you could
      consider live migrating instances off a host with a RAM failure until
      you have time to deal with the problem.</p></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="databases"> </a>Databases</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#database_connect">Database Connectivity</a></span></dt><dt><span class="section"><a href="maintenance.html#perf_and_opt">Performance and Optimizing</a></span></dt></dl></div><p>Almost all OpenStack components have an underlying database to store
    persistent information. Usually this database is MySQL. Normal MySQL
    administration is applicable to these databases. OpenStack does not
    configure the databases out of the ordinary. Basic administration includes
    performance tweaking, high availability, backup, recovery, and repairing.
    For more information, see a standard MySQL administration guide.<a id="d9e5392" class="indexterm"/><a id="d9e5395" class="indexterm"/></p><p>You can perform a couple of tricks with the database to either more
    quickly retrieve information or fix a data inconsistency error—for
    example, an instance was terminated, but the status was not updated in the
    database. These tricks are discussed throughout this book.</p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="database_connect"> </a>Database Connectivity</h3></div></div></div><p>Review the component's configuration file to see how each
      OpenStack component accesses its corresponding database. Look for either
      <code class="code">sql_connection</code> or simply <code class="code">connection</code>. The
      following command uses <code class="code">grep</code> to display the SQL connection
      string for nova, glance, cinder, and keystone:</p><pre class="programlisting"># <span class="bold"><strong>grep -hE "connection ?=" /etc/nova/nova.conf /etc/glance/glance-*.conf
/etc/cinder/cinder.conf /etc/keystone/keystone.conf</strong></span>
sql_connection = mysql+pymysql://nova:nova@cloud.alberta.sandbox.cybera.ca/nova
sql_connection = mysql+pymysql://glance:password@cloud.example.com/glance
sql_connection = mysql+pymysql://glance:password@cloud.example.com/glance
sql_connection = mysql+pymysql://cinder:password@cloud.example.com/cinder
    connection = mysql+pymysql://keystone_admin:password@cloud.example.com/keystone</pre><p>The connection strings take this format:</p><pre class="programlisting">mysql+pymysql:// &lt;username&gt; : &lt;password&gt; @ &lt;hostname&gt; / &lt;database name&gt;</pre></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="perf_and_opt"> </a>Performance and Optimizing</h3></div></div></div><p>As your cloud grows, MySQL is utilized more and more. If you
      suspect that MySQL might be becoming a bottleneck, you should start
      researching MySQL optimization. The MySQL manual has an entire section
      dedicated to this topic: <a class="link" href="http://dev.mysql.com/doc/refman/5.5/en/optimize-overview.html" target="_top">Optimization
      Overview</a>.</p></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="hdmy"> </a>HDWMY</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#hourly">Hourly</a></span></dt><dt><span class="section"><a href="maintenance.html#daily">Daily</a></span></dt><dt><span class="section"><a href="maintenance.html#weekly">Weekly</a></span></dt><dt><span class="section"><a href="maintenance.html#monthly">Monthly</a></span></dt><dt><span class="section"><a href="maintenance.html#quarterly">Quarterly</a></span></dt><dt><span class="section"><a href="maintenance.html#semiannual">Semiannually</a></span></dt></dl></div><p>Here's a quick list of various to-do items for each hour, day, week,
    month, and year. Please note that these tasks are neither required nor
    definitive but helpful ideas:<a id="d9e5416" class="indexterm"/></p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="hourly"> </a>Hourly</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Check your monitoring system for alerts and act on
          them.</p></li><li class="listitem"><p>Check your ticket queue for new tickets.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="daily"> </a>Daily</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Check for instances in a failed or weird state and investigate
          why.</p></li><li class="listitem"><p>Check for security patches and apply them as needed.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="weekly"> </a>Weekly</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Check cloud usage: </p><div class="itemizedlist"><ul class="itemizedlist" type="circle"><li class="listitem"><p>User quotas</p></li><li class="listitem"><p>Disk space</p></li><li class="listitem"><p>Image usage</p></li><li class="listitem"><p>Large instances</p></li><li class="listitem"><p>Network usage (bandwidth and IP usage)</p></li></ul></div></li><li class="listitem"><p>Verify your alert mechanisms are still working.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="monthly"> </a>Monthly</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Check usage and trends over the past month.</p></li><li class="listitem"><p>Check for user accounts that should be removed.</p></li><li class="listitem"><p>Check for operator accounts that should be removed.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="quarterly"> </a>Quarterly</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Review usage and trends over the past quarter.</p></li><li class="listitem"><p>Prepare any quarterly reports on usage and statistics.</p></li><li class="listitem"><p>Review and plan any necessary cloud additions.</p></li><li class="listitem"><p>Review and plan any major OpenStack upgrades.</p></li></ul></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="semiannual"> </a>Semiannually</h3></div></div></div><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Upgrade OpenStack.</p></li><li class="listitem"><p>Clean up after an OpenStack upgrade (any unused or new
          services to be aware of?).</p></li></ul></div></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="broken_component"> </a>Determining Which Component Is Broken</h2></div></div></div><div class="toc"><dl><dt><span class="section"><a href="maintenance.html#tailing_logs">Tailing Logs</a></span></dt><dt><span class="section"><a href="maintenance.html#daemons_cli">Running Daemons on the CLI</a></span></dt></dl></div><p>OpenStack's collection of different components interact with each
    other strongly. For example, uploading an image requires interaction from
    <code class="code">nova-api</code>, <code class="code">glance-api</code>,
    <code class="code">glance-registry</code>, keystone, and potentially
    <code class="code">swift-proxy</code>. As a result, it is sometimes difficult to
    determine exactly where problems lie. Assisting in this is the purpose of
    this section.<a id="d9e5485" class="indexterm"/><a id="d9e5488" class="indexterm"/></p><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="tailing_logs"> </a>Tailing Logs</h3></div></div></div><p>The first place to look is the log file related to the command you
      are trying to run. For example, if <code class="code">nova list</code> is failing,
      try tailing a nova log file and running the command again:<a id="d9e5495" class="indexterm"/></p><p>Terminal 1:</p><pre class="programlisting"># tail -f /var/log/nova/nova-api.log</pre><p>Terminal 2:</p><pre class="programlisting"># nova list</pre><p>Look for any errors or traces in the log file. For more
      information, see <a class="xref" href="logging_monitoring.html" title="Chapter 13. Logging and Monitoring">Chapter 13, <em>Logging and Monitoring</em></a>.</p><p>If the error indicates that the problem is with another component,
      switch to tailing that component's log file. For example, if nova cannot
      access glance, look at the <code class="literal">glance-api</code> log:</p><p>Terminal 1:</p><pre class="programlisting"># tail -f /var/log/glance/api.log</pre><p>Terminal 2:</p><pre class="programlisting"># nova list</pre><p>Wash, rinse, and repeat until you find the core cause of the
      problem.</p></div><div class="section"><div xmlns="" class="titlepage"><div><div><h3 xmlns="http://www.w3.org/1999/xhtml" class="title"><a id="daemons_cli"> </a>Running Daemons on the CLI</h3></div></div></div><p>Unfortunately, sometimes the error is not apparent from the log
      files. In this case, switch tactics and use a different command; maybe
      run the service directly on the command line. For example, if the
      <code class="code">glance-api</code> service refuses to start and stay running, try
      launching the daemon from the command line:<a id="d9e5514" class="indexterm"/><a id="d9e5517" class="indexterm"/></p><pre class="programlisting"># sudo -u glance -H glance-api</pre><p>This might print the error and cause of the problem.</p><div class="note" style="margin-left: 0.5in; margin-right: 0.5in;"><table border="0" summary="Note"><tr><td rowspan="2" align="center" valign="top" width="25"><img alt="[Note]" src="../common/images/admon/note.png"/></td><th align="left">Note</th></tr><tr><td align="left" valign="top"><p>The <code class="literal">-H</code> flag is required when running the
          daemons with sudo because some daemons will write files relative to
          the user's home directory, and this write may fail if
          <code class="literal">-H</code> is left off.</p></td></tr></table></div><div class="sidebar"><div class="titlepage"><!--FOOBAR!--><div><div><p class="title"><strong>Example of Complexity</strong></p></div></div></div><p>One morning, a compute node failed to run any instances. The log
        files were a bit vague, claiming that a certain instance was unable to
        be started. This ended up being a red herring because the instance was
        simply the first instance in alphabetical order, so it was the first
        instance that <code class="literal">nova-compute</code> would touch.</p><p>Further troubleshooting showed that libvirt was not running at
        all. This made more sense. If libvirt wasn't running, then no instance
        could be virtualized through KVM. Upon trying to start libvirt, it
        would silently die immediately. The libvirt logs did not explain
        why.</p><p>Next, the <code class="code">libvirtd</code> daemon was run on the command
        line. Finally a helpful error message: it could not connect to d-bus.
        As ridiculous as it sounds, libvirt, and thus
        <code class="code">nova-compute</code>, relies on d-bus and somehow d-bus crashed.
        Simply starting d-bus set the entire chain back on track, and soon
        everything was back up and running.</p></div></div></div><div class="section"><div xmlns="" class="titlepage"><div><div><h2 xmlns="http://www.w3.org/1999/xhtml" class="title" style="clear: both"><a id="uninstalling"> </a>Uninstalling</h2></div></div></div><p>While we'd always recommend using your automated deployment system
    to reinstall systems from scratch, sometimes you do need to remove
    OpenStack from a system the hard way. Here's how:<a id="d9e5536" class="indexterm"/><a id="d9e5538" class="indexterm"/></p><div class="itemizedlist"><ul class="itemizedlist" type="disc"><li class="listitem"><p>Remove all packages.</p></li><li class="listitem"><p>Remove remaining files.</p></li><li class="listitem"><p>Remove databases.</p></li></ul></div><p>These steps depend on your underlying distribution, but in general
    you should be looking for "purge" commands in your package manager, like
    <code class="literal">aptitude purge ~c $package</code>. Following this, you can
    look for orphaned files in the directories referenced throughout this
    guide. To uninstall the database properly, refer to the manual appropriate
    for the product in use.<a id="d9e5550" class="indexterm"/></p></div></div><script type="text/javascript" src="../common/main.js"><!----></script><div class="logabug" style="text-align: center"><a id="AskOOLink2" href="http://ask.openstack.org" target="_blank"><i class="icon-question"><!----></i>Questions? Discuss on ask.openstack.org</a><br/><a id="logABugLink2" href="" target="_blank"><i class="icon-bug"><!----></i>Found an error? Report a bug against this page</a></div><script language="JavaScript">
	  var sourceFile = "source File: file:/home/max/projects/operations-guide/doc/openstack-ops/ch_ops_maintenance.xml"
	  var xmlId = "xml:id: maintenance"
	  var lineFeed = "%0A";
	  var docUrl = "URL: " + window.location;
	  var bugTitle = "Chapter 11. Maintenance, Failures, and Debugging in OpenStack Operations Guide";
	  var buildTime = "Built: 2015-10-20T23:42:21+02:00";
	  var gitSha = "git SHA: c736dbf695b9b6d705875e6f24f6f8ec044c4e31";
	  var fieldComment = encodeURI(buildTime) +  lineFeed + encodeURI(gitSha) + lineFeed + encodeURI(docUrl) + lineFeed + encodeURI(sourceFile) + lineFeed + encodeURI(xmlId);
	  logABug(bugTitle,fieldComment);
	</script><hr/><div id="disqus_thread"><script type="text/javascript">
	      if(window.location.protocol.substring(0,4) == 'http'){
	        var disqus_shortname = 'openstack-ops';
	      
	        var disqus_identifier = 'openstack-operations-guidemaintenance';
	      
	      }
	    </script><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript><script type="text/javascript" src="../common/comments.js"><!----></script></div><hr/><div class="legal"><a href="index.html">Legal notices</a></div></div><div><div id="leftnavigation" style="padding-top:3px; background-color:white;"><div id="tabs"><ul><li><a href="#treeDiv" tabindex="1"><span class="contentsTab">Contents</span></a></li><li><a href="#searchDiv" tabindex="1"><span class="searchTab">Search</span></a></li></ul><div id="treeDiv"><img src="../common/images/loading.gif" alt="loading table of contents..." id="tocLoading" style="display:block;"/><div id="ulTreeDiv" style="display:none" class="thisisthat"><ul id="tree" class="filetree"><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html">Preface</a></span><ul><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#introduction-to-openstack">Introduction to OpenStack</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#preface_getting_started">Getting Started with OpenStack</a></span><ul><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#preface_using_openstack">Using OpenStack</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#preface_plug_and_play">Plug and Play OpenStack</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#preface_roll_your_own_openstack">Roll Your Own OpenStack</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#who-this-book-is-for">Who This Book Is For</a></span><ul><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#further_reading">Further Reading</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#how-this-book-is-organized">How This Book Is Organized</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#why-and-how-we-wrote-this-book">Why and How We Wrote This Book</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#how-to-contribute-to-ops-guide">How to Contribute to This Book</a></span></li><li tabindex="2"><span class="file"><a href="openstack-ops_preface.html#conventions_used_in_this_book">Conventions Used in This Book</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="architecture.html">Architecture</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html">1. Architecture Examples</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#example_architecture-nova">Example Architecture—Legacy Networking (nova)</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#overview">Overview</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#overview_components-nova">Components</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#rationale">Rationale</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#neutron">Why not use OpenStack Networking?</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#multi-host-networking">Why use multi-host networking?</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#detailed_desc">Detailed Description</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#optional_extensions">Optional Extensions</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#example_architecture-neutron">Example Architecture—OpenStack Networking</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#overview-neutron">Overview</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#overview_components_neutron">Components</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#rational-neutron">Rationale</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#detailed_description">Detailed Description</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#node_types">Node types</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#networking_layout">Networking layout</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#OS_network">OpenStack internal network</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#public_network">Public Network</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#vm_network">VM traffic network</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#node_connectivity">Node connectivity</a></span><ul><li tabindex="2"><span class="file"><a href="example_architecture.html#node_connectivity-initial">Initial deployment</a></span></li><li tabindex="2"><span class="file"><a href="example_architecture.html#node_connectivity-performance">Connectivity for maximum performance</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#node_diagrams">Node diagrams</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#software_config">Example Component Configuration</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="example_architecture.html#example_archs_conclusion">Parting Thoughts on Architecture Examples</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html">2. Provisioning and Deployment</a></span><ul><li tabindex="2"><span class="file"><a href="section_arch_provision.html#automated_deploy">Automated Deployment</a></span><ul><li tabindex="2"><span class="file"><a href="section_arch_provision.html#disk_partition_raid">Disk Partitioning and RAID</a></span></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html#network_config">Network Configuration</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html#auto_config">Automated Configuration</a></span></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html#remote_mgmt">Remote Management</a></span></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html#provision-deploy-summary">Parting Thoughts for Provisioning and Deploying OpenStack</a></span></li><li tabindex="2"><span class="file"><a href="section_arch_provision.html#provision_conclusion">Conclusion</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html">3. Designing for Cloud Controllers and Cloud Management</a></span><ul><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#hardware_consid">Hardware Considerations</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#separate_services">Separation of Services</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#database">Database</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#message_queue">Message Queue</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#conductor">Conductor Services</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#api">Application Programming Interface (API)</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#extensions">Extensions</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#scheduling">Scheduling</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#images">Images</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#dashboard">Dashboard</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#authentication">Authentication and Authorization</a></span></li><li tabindex="2"><span class="file"><a href="cloud_controller_design.html#network_consid">Network Considerations</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="compute_nodes.html">4. Compute Nodes</a></span><ul><li tabindex="2"><span class="file"><a href="compute_nodes.html#cpu_choice">Choosing a CPU</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#hypervisor_choice">Choosing a Hypervisor</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#instance_storage">Instance Storage Solutions</a></span><ul><li tabindex="2"><span class="file"><a href="compute_nodes.html#off_compute_node_storage">Off Compute Node Storage—Shared File System</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#on_compute_node_storage">On Compute Node Storage—Shared File System</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#on_compute_node_storage_nonshared">On Compute Node Storage—Nonshared File System</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#live_migration">Issues with Live Migration</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#file_systems">Choice of File System</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#overcommit">Overcommitting</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#logging">Logging</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#networking">Networking</a></span></li><li tabindex="2"><span class="file"><a href="compute_nodes.html#conclusion">Conclusion</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="scaling.html">5. Scaling</a></span><ul><li tabindex="2"><span class="file"><a href="scaling.html#starting">The Starting Point</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#add_controller_nodes">Adding Cloud Controller Nodes</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#segregate_cloud">Segregating Your Cloud</a></span><ul><li tabindex="2"><span class="file"><a href="scaling.html#cells_regions">Cells and Regions</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#availability_zones">Availability Zones and Host Aggregates</a></span><ul><li tabindex="2"><span class="file"><a href="scaling.html#az_s3">Availability zone</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#ha_s3">Host aggregates zone</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="scaling.html#scalable_hardware">Scalable Hardware</a></span><ul><li tabindex="2"><span class="file"><a href="scaling.html#hardware_procure">Hardware Procurement</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#capacity_planning">Capacity Planning</a></span></li><li tabindex="2"><span class="file"><a href="scaling.html#burin_testing">Burn-in Testing</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="storage_decision.html">6. Storage Decisions</a></span><ul><li tabindex="2"><span class="file"><a href="storage_decision.html#ephemeral_storage">Ephemeral Storage</a></span></li><li tabindex="2"><span class="file"><a href="storage_decision.html#persistent_storage">Persistent Storage</a></span><ul><li tabindex="2"><span class="file"><a href="storage_decision.html#object_storage">Object Storage</a></span></li><li tabindex="2"><span class="file"><a href="storage_decision.html#block_storage">Block Storage</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="storage_decision.html#shared_file_system">Shared File System Storage</a></span></li><li tabindex="2"><span class="file"><a href="storage_decision.html#storage_concepts">OpenStack Storage Concepts</a></span></li><li tabindex="2"><span class="file"><a href="storage_decision.html#storage_backends">Choosing Storage Back Ends</a></span><ul><li tabindex="2"><span class="file"><a href="storage_decision.html#commodity_storage_backends">Commodity Storage Back-end Technologies</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="storage_decision.html#storagedecisions_conclusion">Conclusion</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_design.html">7. Network Design</a></span><ul><li tabindex="2"><span class="file"><a href="network_design.html#mgmt_network">Management Network</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#public_addressing">Public Addressing Options</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#ip_address_planning">IP Address Planning</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#network_topology">Network Topology</a></span><ul><li tabindex="2"><span class="file"><a href="network_design.html#vlans">VLAN Configuration Within OpenStack VMs</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#multi_nic">Multi-NIC Provisioning</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#multi_host_single_host_networks">Multi-Host and Single-Host Networking</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_design.html#services_for_networking">Services for Networking</a></span><ul><li tabindex="2"><span class="file"><a href="network_design.html#ntp">NTP</a></span></li><li tabindex="2"><span class="file"><a href="network_design.html#dns">DNS</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_design.html#ops-network-conclusion">Conclusion</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="operations.html">Operations</a></span><ul><li tabindex="2"><span class="file"><a href="lay_of_the_land.html">8. Lay of the Land</a></span><ul><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#dashboard_admin">Using the OpenStack Dashboard for Administration</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#cli_tools">Command-Line Tools</a></span><ul><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#install_tools">Installing the Tools</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#admin_cli">Administrative Command-Line Tools</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#get_creds">Getting Credentials</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#cli_tricks">Inspecting API Calls</a></span><ul><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#curl">Using cURL for further inspection</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#servers_services">Servers and Services</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#diagnose-compute">Diagnose Your Compute Nodes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#network">Network Inspection</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#users_projects">Users and Projects</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#running_instances">Running Instances</a></span></li><li tabindex="2"><span class="file"><a href="lay_of_the_land.html#ops-lay-of-land-summary">Summary</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="projects_users.html">9. Managing Projects and Users</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#projects_or_tenants">Projects or Tenants?</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#managing_projects">Managing Projects</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#add_projects">Adding Projects</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="projects_users.html#quotas">Quotas</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#set_image_quotas">Set Image Quotas</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#cli_set_compute_quotas">Set Compute Service Quotas</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#cli_set_compute_quotas_procedure">View and update compute quotas for a tenant (project)</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="projects_users.html#cli_set_object_storage_quotas">Set Object Storage Quotas</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#cli_set_block_storage_quotas">Set Block Storage Quotas</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#cli_set_block_storage_quotas_procedure">View and update Block Storage quotas for a tenant
        (project)</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="projects_users.html#user_mgmt">User Management</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#create_new_users">Creating New Users</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#associate_users_with_projects">Associating Users with Projects</a></span><ul><li tabindex="2"><span class="file"><a href="projects_users.html#customize_auth">Customizing Authorization</a></span></li><li tabindex="2"><span class="file"><a href="projects_users.html#problem_users">Users Who Disrupt Other Users</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="projects_users.html#projects_users_summary">Summary</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="user_facing_operations.html">10. User-Facing Operations</a></span><ul><li tabindex="2"><span class="file"><a href="user_facing_images.html">Images</a></span><ul><li tabindex="2"><span class="file"><a href="user_facing_images.html#add_images">Adding Images</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_images.html#sharing_images">Sharing Images Between Projects</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_images.html#delete_images">Deleting Images</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_images.html#other_cli">Other CLI Options</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_images.html#image_service_and_database">The Image service and the Database</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_images.html#sample_image_database">Example Image service Database Queries</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="flavors.html">Flavors</a></span><ul><li tabindex="2"><span class="file"><a href="private-flavors.html">Private Flavors</a></span></li><li tabindex="2"><span class="file"><a href="flavors.html#d9e4195">How Do I Modify an Existing Flavor?</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="security_groups.html">Security Groups</a></span><ul><li tabindex="2"><span class="file"><a href="security_groups.html#general-security-group-config">General Security Groups Configuration</a></span></li><li tabindex="2"><span class="file"><a href="security_groups.html#end-user-config-sec-group">End-User Configuration of Security Groups</a></span><ul><li tabindex="2"><span class="file"><a href="security_groups.html#config-sec-group-by-nova-command">Setting with nova command</a></span></li><li tabindex="2"><span class="file"><a href="security_groups.html#config-sec-group-by-neutron-command">Setting with neutron command</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="user_facing_block_storage.html">Block Storage</a></span><ul><li tabindex="2"><span class="file"><a href="user_facing_block_storage.html#block_storage_creation_failures">Block Storage Creation Failures</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html">Shared File System Storage</a></span><ul><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#create_share">Create share</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#manage_access_to_shares">Manage Access To Shares</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#manage_shares">Manage Shares</a></span><ul><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#update_share">Update Share</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#reset_share_state">Reset Share State</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#delete_share">Delete Share</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#create_snapshots">Create Snapshots</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#create_a_share_network">Create a Share Network</a></span></li><li tabindex="2"><span class="file"><a href="user_facing_shared_file_systems.html#manage_a_share_network">Manage a Share Network</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="instances.html">Instances</a></span><ul><li tabindex="2"><span class="file"><a href="instances.html#start_instances">Starting Instances</a></span></li><li tabindex="2"><span class="file"><a href="instances.html#instance_boot_failures">Instance Boot Failures</a></span></li><li tabindex="2"><span class="file"><a href="instances.html#instance_specific_data">Using Instance-Specific Data</a></span><ul><li tabindex="2"><span class="file"><a href="instances.html#instance_metadata">Instance metadata</a></span></li><li tabindex="2"><span class="file"><a href="instances.html#instance_user_data">Instance user data</a></span></li><li tabindex="2"><span class="file"><a href="instances.html#file_injection">File injection</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="associate_security_groups.html">Associating Security Groups</a></span></li><li tabindex="2"><span class="file"><a href="floating_ips.html">Floating IPs</a></span></li><li tabindex="2"><span class="file"><a href="attach_block_storage.html">Attaching Block Storage</a></span></li><li tabindex="2"><span class="file"><a href="snapshots.html">Taking Snapshots</a></span><ul><li tabindex="2"><span class="file"><a href="snapshots.html#live-snapshots">Live Snapshots</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="database_instances.html">Instances in the Database</a></span></li><li tabindex="2"><span class="file"><a href="user-facing-outro.html">Good Luck!</a></span></li></ul></li><li tabindex="2" id="webhelp-currentid"><span class="file"><a href="maintenance.html">11. Maintenance, Failures, and Debugging</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#cloud_controller_storage">Cloud Controller and Storage Proxy Failures and Maintenance</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#planned_maintenance">Planned Maintenance</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#reboot_cloud_controller">Rebooting a Cloud Controller or Storage Proxy</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#after_a_cc_reboot">After a Cloud Controller or Storage Proxy Reboots</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#cc_failure">Total Cloud Controller Failure</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#compute_node_failures">Compute Node Failures and Maintenance</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#planned_maintenance_compute_node">Planned Maintenance</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#after_compute_node_reboot">After a Compute Node Reboots</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#maintenance_instances">Instances</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#inspect_and_recover_failed_instances">Inspecting and Recovering Data from Failed Instances</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#volumes">Volumes</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#totle_compute_node_failure">Total Compute Node Failure</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#var_lib_nova_instances">/var/lib/nova/instances</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#storage_node_failures">Storage Node Failures and Maintenance</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#reboot_storage_node">Rebooting a Storage Node</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#shut_down_storage_node">Shutting Down a Storage Node</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#replace_swift_disk">Replacing a Swift Disk</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#complete_failure">Handling a Complete Failure</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#config_mgmt">Configuration Management</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#hardware">Working with Hardware</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#add_new_node">Adding a Compute Node</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#add_new_object_node">Adding an Object Storage Node</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#replace_components">Replacing Components</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#databases">Databases</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#database_connect">Database Connectivity</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#perf_and_opt">Performance and Optimizing</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#hdmy">HDWMY</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#hourly">Hourly</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#daily">Daily</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#weekly">Weekly</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#monthly">Monthly</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#quarterly">Quarterly</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#semiannual">Semiannually</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#broken_component">Determining Which Component Is Broken</a></span><ul><li tabindex="2"><span class="file"><a href="maintenance.html#tailing_logs">Tailing Logs</a></span></li><li tabindex="2"><span class="file"><a href="maintenance.html#daemons_cli">Running Daemons on the CLI</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="maintenance.html#uninstalling">Uninstalling</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html">12. Network Troubleshooting</a></span><ul><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#check_interface_states">Using "ip a" to Check Interface States</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#nova_network_traffic_in_cloud">Visualizing nova-network Traffic in the Cloud</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#neutron_network_traffic_in_cloud">Visualizing OpenStack Networking Service Traffic in the
    Cloud</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#failure_in_path">Finding a Failure in the Path</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#tcpdump">tcpdump</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#iptables">iptables</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#network_config_database">Network Configuration in the Database for nova-network</a></span><ul><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#dissasociate_floating_ip">Manually Disassociating a Floating IP</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#debug_dhcp_issues">Debugging DHCP Issues with nova-network</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#debugging_dns_issues">Debugging DNS Issues</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#trouble_shooting_ovs">Troubleshooting Open vSwitch</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#dealing_with_netns">Dealing with Network Namespaces</a></span></li><li tabindex="2"><span class="file"><a href="network_troubleshooting.html#ops-network-troubleshooting-summary">Summary</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html">13. Logging and Monitoring</a></span><ul><li tabindex="2"><span class="file"><a href="logging_monitoring.html#where_are_logs">Where Are the Logs?</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#how_to_read_logs">Reading the Logs</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#tracing_instance_request">Tracing Instance Requests</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#add_custom_logging">Adding Custom Logging Statements</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#rabbitmq">RabbitMQ Web Management Interface or rabbitmqctl</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#manage_logs_centrally">Centrally Managing Logs</a></span><ul><li tabindex="2"><span class="file"><a href="logging_monitoring.html#rsyslog_client_config">rsyslog Client Configuration</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#rsyslog_server_config">rsyslog Server Configuration</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#monitoring">Monitoring</a></span><ul><li tabindex="2"><span class="file"><a href="logging_monitoring.html#process_monitoring">Process Monitoring</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#resource_alerting">Resource Alerting</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#stacktach">StackTach</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#metering_telemetry">OpenStack Telemetry</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#os_resources">OpenStack-Specific Resources</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#intelligent_alerting">Intelligent Alerting</a></span></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#trending">Trending</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="logging_monitoring.html#ops-log-monitor-summary">Summary</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html">14. Backup and Recovery</a></span><ul><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#what_to_backup">What to Back Up</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#database_backups">Database Backups</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#file_system_backups">File System Backups</a></span><ul><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#compute">Compute</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#image_catalog_delivery">Image Catalog and Delivery</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#identity">Identity</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#ops_block_storage">Block Storage</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#ops_object_storage">Object Storage</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#recovering_backups">Recovering Backups</a></span></li><li tabindex="2"><span class="file"><a href="backup_and_recovery.html#ops-backup-recovery-summary">Summary</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="customize.html">15. Customization</a></span><ul><li tabindex="2"><span class="file"><a href="customize.html#devstack">Create an OpenStack Development Environment</a></span></li><li tabindex="2"><span class="file"><a href="customize.html#swift_middleware_example">Customizing Object Storage (Swift) Middleware</a></span></li><li tabindex="2"><span class="file"><a href="customize.html#nova_scheduler_example">Customizing the OpenStack Compute (nova) Scheduler</a></span></li><li tabindex="2"><span class="file"><a href="customize.html#ops_dashboard">Customizing the Dashboard (Horizon)</a></span></li><li tabindex="2"><span class="file"><a href="customize.html#customize_conclusion">Conclusion</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html">16. Upstream OpenStack</a></span><ul><li tabindex="2"><span class="file"><a href="upstream_openstack.html#get_help">Getting Help</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#report_bugs">Reporting Bugs</a></span><ul><li tabindex="2"><span class="file"><a href="upstream_openstack.html#confirm_priority">Confirming and Prioritizing</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#bug_fixing">Bug Fixing</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#after_change_is_accepted">After the Change Is Accepted</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#openstack_community">Join the OpenStack Community</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#contribute_to_docs">How to Contribute to the Documentation</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#security_info">Security Information</a></span></li><li tabindex="2"><span class="file"><a href="upstream_openstack.html#additional_info">Finding Additional Information</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html">17. Advanced Configuration</a></span><ul><li tabindex="2"><span class="file"><a href="advanced_configuration.html#driver_differences">Differences Between Various Drivers</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#periodic_tasks">Implementing Periodic Tasks</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#specific-advanced-config-topics">Specific Configuration Topics</a></span><ul><li tabindex="2"><span class="file"><a href="advanced_configuration.html#adv-config-security">Security Configuration for Compute, Networking, and
      Storage</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#adv-config-ha">High Availability</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#adv-config-ipv6">Enabling IPv6 Support</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#specific-advanced-config-period-tasks">Periodic Task Frequency for Compute</a></span></li><li tabindex="2"><span class="file"><a href="advanced_configuration.html#adv-config-geography">Geographical Considerations for Object Storage</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="ch_ops_upgrades.html">18. Upgrades</a></span><ul><li tabindex="2"><span class="file"><a href="ops_upgrades-pre-testing.html">Pre-Upgrade Testing Environment</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades-prepare-roll-back.html">Preparing for a Rollback</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades-general-steps.html">Upgrades</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_upgrade_levels.html">Upgrade Levels</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html">How to Perform an Upgrade from Grizzly to
      Havana—Ubuntu</a></span><ul><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_impact_users-ubuntu">Impact on Users</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_considerations-ubuntu">Upgrade Considerations</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_backup-ubuntu">Perform a Backup</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_manage_repos-ubuntu">Manage Repositories</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_update_configuration-ubuntu">Update Configuration Files</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_packages_controller-ubuntu">Upgrade Packages on the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_database_restart-ubuntu">Stop Services, Update Database Schemas, and Restart
        Services on the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_packages_compute-ubuntu">Upgrade Packages and Restart Services on the Compute
        Nodes</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-ubuntu.html#upgrade_packages_storage-ubuntu">Upgrade Packages and Restart Services on the Block
        Storage Nodes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html">How to Perform an Upgrade from Grizzly to Havana—Red Hat
      Enterprise Linux and Derivatives</a></span><ul><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_impact_users-rhel">Impact on Users</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_considerations-rhel">Upgrade Considerations</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_backup-rhel">Perform a Backup</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_manage_repos-rhel">Manage Repositories</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_update_configuration-rhel">Update Configuration Files</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_packages_controller-rhel">Upgrade Packages on the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_database_restart-rhel">Stop Services, Update Database Schemas, and Restart
        Services on the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_packages_compute-rhel">Upgrade Packages and Restart Services on the Compute
        Nodes</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades_grizzly_havana-rhel.html#upgrade_packages_storage-rhel">Upgrade Packages and Restart Services on the Block
        Storage Nodes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html">How to Perform an Upgrade from Havana to
      Icehouse—Ubuntu</a></span><ul><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-impact">Impact on Users</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-considerations">Upgrade Considerations</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-backup">Perform a Backup</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-manage-repos">Manage Repositories</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-controller-node">Upgrade the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-services">Upgrade Each Service</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-network-node">Upgrade the Network Node</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-compute-nodes">Upgrade the Compute Nodes</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-ubuntu.html#upgrade_icehouse-ubuntu-storage-nodes">Upgrade the Storage Nodes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html">How to Perform an Upgrade from Havana to Icehouse—Red Hat
      Enterprise Linux and Derivatives</a></span><ul><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-impact">Impact on Users</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-considerations">Upgrade Considerations</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-backup">Perform a Backup</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-manage-repos">Manage Repositories</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-controller-node">Upgrade the Controller Node</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-services">Upgrade Each Service</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-network-node">Upgrade the Network Node</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-compute-nodes">Upgrade the Compute Nodes</a></span></li><li tabindex="2"><span class="file"><a href="upgrades_havana-icehouse-rhel.html#upgrade_icehouse-rhel-storage-nodes">Upgrade the Storage Nodes</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html">How to Perform an Upgrade from Icehouse to Juno</a></span><ul><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-considerations">Before you begin</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-backup">Perform a backup</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-repos">Manage repositories</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-controller">Controller nodes</a></span><ul><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-controller-packages">Upgrade packages to Juno</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-controller-services">Update services</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-network">Network nodes</a></span><ul><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-network-packages">Upgrade packages to Juno</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-network-services">Update services</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-compute">Compute nodes</a></span><ul><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-compute-packages">Upgrade packages to Juno</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-compute-services">Update services</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-storage">Storage nodes</a></span><ul><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-storage-packages">Upgrade packages to Juno</a></span></li><li tabindex="2"><span class="file"><a href="upgrade-icehouse-juno.html#upgrade-icehouse-juno-storage-services">Update services</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="ops_upgrades-final-steps.html">Cleaning Up and Final Configuration File Updates</a></span></li><li tabindex="2"><span class="file"><a href="ops_upgrades-roll-back.html">Rolling Back a Failed Upgrade</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="use-cases.html">A. Use Cases</a></span><ul><li tabindex="2"><span class="file"><a href="nectar.html">NeCTAR</a></span><ul><li tabindex="2"><span class="file"><a href="nectar_deploy.html">Deployment</a></span></li><li tabindex="2"><span class="file"><a href="nectar_resources.html">Resources</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="mit_csail.html">MIT CSAIL</a></span><ul><li tabindex="2"><span class="file"><a href="mit_csail_deploy.html">Deployment</a></span></li><li tabindex="2"><span class="file"><a href="CSAIL_resources.html">Resources</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="dair.html">DAIR</a></span><ul><li tabindex="2"><span class="file"><a href="dair_deploy.html">Deployment</a></span></li><li tabindex="2"><span class="file"><a href="dair_resources.html">Resources</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="cern.html">CERN</a></span><ul><li tabindex="2"><span class="file"><a href="cern_deploy.html">Deployment</a></span></li><li tabindex="2"><span class="file"><a href="cern_resources.html">Resources</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="app_crypt.html">B. Tales From the Cryp^H^H^H^H Cloud</a></span><ul><li tabindex="2"><span class="file"><a href="double_vlan.html">Double VLAN</a></span></li><li tabindex="2"><span class="file"><a href="issue.html">"The Issue"</a></span></li><li tabindex="2"><span class="file"><a href="disappear_images.html">Disappearing Images</a></span></li><li tabindex="2"><span class="file"><a href="valentines.html">The Valentine's Day Compute Node Massacre</a></span></li><li tabindex="2"><span class="file"><a href="rabbithole.html">Down the Rabbit Hole</a></span></li><li tabindex="2"><span class="file"><a href="haunted.html">Havana Haunted by the Dead</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="working-with-roadmaps.html">C. Working with Roadmaps</a></span><ul><li tabindex="2"><span class="file"><a href="roadmap-information-available.html">Information Available to You</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-influencing.html">Influencing the Roadmap</a></span></li><li tabindex="2"><span class="file"><a href="aspects-to-watch.html">Aspects to Watch</a></span><ul><li tabindex="2"><span class="file"><a href="roadmap-driver-improvements.html">Driver Quality Improvements</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-easier-upgrades.html">Easier Upgrades</a></span></li><li tabindex="2"><span class="file"><a href="nova-network-deprecation.html">Deprecation of Nova Network</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="roadmap-DVR.html">Distributed Virtual Router</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-ML2.html">Replacement of Open vSwitch Plug-in with Modular Layer 2</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-new-api.html">New API Versions</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-triple-o.html">OpenStack on OpenStack (TripleO)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-savanna.html">Data processing service for OpenStack (sahara)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-baremetal.html">Bare metal Deployment (ironic)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-trove.html">Database as a Service (trove)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-zaqar.html">Message Service (zaqar)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-designate.html">DNS service (designate)</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-scheduling.html">Scheduler Improvements</a></span><ul><li tabindex="2"><span class="file"><a href="roadmap-volumes.html">Block Storage Improvements</a></span></li><li tabindex="2"><span class="file"><a href="roadmap-python-sdk.html">Toward a Python SDK</a></span></li></ul></li></ul></li><li tabindex="2"><span class="file"><a href="recommended-reading.html">D. Resources</a></span><ul><li tabindex="2"><span class="file"><a href="recommended-reading.html#openstack-resources">OpenStack</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#cloud-general-resources">Cloud (General)</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#python-resources">Python</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#networking-resources">Networking</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#system-admin-resources">Systems Administration</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#virtualization-resources">Virtualization</a></span></li><li tabindex="2"><span class="file"><a href="recommended-reading.html#config-management-resources">Configuration Management</a></span></li></ul></li><li tabindex="2"><span class="file"><a href="openstack_glossary.html">Glossary</a></span></li><li tabindex="2"><span class="file"><a href="ix01.html">Index</a></span></li></ul></div></div><div id="searchDiv"><div id="search"><form onsubmit="Verifie(ditaSearch_Form);return false" name="ditaSearch_Form" class="searchForm"><fieldset class="searchFieldSet"><legend>Search</legend><center><input id="textToSearch" name="textToSearch" type="text" class="searchText"/> &nbsp; <input onclick="Verifie(ditaSearch_Form)" type="button" class="searchButton" value="Go" id="doSearch"/></center></fieldset></form></div><div id="searchResults"><center/></div><p class="searchHighlight"><a href="#" onclick="toggleHighlight()">Search Highlighter (On/Off)</a></p></div></div></div></div></body></html>